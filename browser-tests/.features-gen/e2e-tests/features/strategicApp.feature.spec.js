// Generated from: e2e-tests/features/strategicApp.feature
import { test } from "../../../e2e-tests/fixtures/bdd-fixtures.ts";

test.describe('StrategicApp', () => {

  test('Happy MAM iPhone journey', { tag: ['@QualityGateStackTest', '@Build', '@QualityGateRegressionTest'] }, async ({ Given, When, Then, And, dcmawAsyncService, identityPage, orchestratorPage, page }) => { 
    await Given('user starts a fresh full journey in \'build\'', null, { orchestratorPage }); 
    await And('the \'strategicApp\' feature set is enabled', null, { identityPage }); 
    await And('the user should see a page with heading \'Where do you live?\'', null, { page }); 
    await When('clicks \'UK, Channel Islands or Isle of Man\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading \'Tell us if you have one of the following types of photo ID\'', null, { page }); 
    await When('clicks \'Yes\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading \'Are you on a computer or a tablet right now?\'', null, { page }); 
    await When('clicks \'No - I am on a smartphone\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading \'Tell us what smartphone you are using now\'', null, { page }); 
    await When('clicks "Yes - I\'m on an iPhone" radio, then continue', null, { page }); 
    await And('the DCMAW CRI produces a \'kennethD\' \'ukChippedPassport\' \'success\' VC', null, { dcmawAsyncService }); 
    await And('user returns from the app to core-front', null, { page }); 
    await Then('the user should see a page with heading "We\'re checking your details"', null, { page }); 
    await Then('the continue button should be enabled within 15 seconds', null, { page }); 
    await When('the user clicks on the Continue button', null, { page }); 
    await Then('the user should see a page with heading "We\'ve successfully matched you to the photo on your ID"', null, { page }); 
    await When('the user clicks on the Continue button', null, { page }); 
    await Then('the user should see a page with heading \'Address (Stub)\'', null, { page }); 
    await When('submits \'Kenneth Decerqueira (Valid Experian) Address\' evidence', null, { page }); 
    await Then('the user should see a page with heading \'Fraud Check (Stub)\'', null, { page }); 
    await When('submits \'Kenneth Decerqueira (Valid Experian) Fraud\' evidence with scores', {"dataTable":{"rows":[{"cells":[{"value":"Attribute"},{"value":"Values"}]},{"cells":[{"value":"fraud"},{"value":"1"}]},{"cells":[{"value":"activity"},{"value":"0"}]}]}}, { page }); 
    await Then('user should have a \'"P2"\' identity', null, { page }); 
  });

  test('Happy DAD journey', { tag: ['@QualityGateStackTest', '@Build', '@PYIC-7471', '@QualityGateRegressionTest'] }, async ({ Given, When, Then, And, dcmawAsyncService, identityPage, orchestratorPage, page }) => { 
    await Given('user starts a fresh full journey in \'build\'', null, { orchestratorPage }); 
    await And('the \'strategicApp\' feature set is enabled', null, { identityPage }); 
    await And('the user should see a page with heading \'Where do you live?\'', null, { page }); 
    await When('clicks \'UK, Channel Islands or Isle of Man\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading \'Tell us if you have one of the following types of photo ID\'', null, { page }); 
    await When('clicks \'Yes\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading \'Are you on a computer or a tablet right now?\'', null, { page }); 
    await When('clicks \'Yes - I am on a computer or tablet\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading \'Tell us if you have access to an iPhone or Android phone\'', null, { page }); 
    await When('clicks \'Yes - I have access to an iPhone\' radio, then continue', null, { page }); 
    await Then('the user should see a page with heading "Use the GOV.UK One Login app to prove your identity"', null, { page }); 
    await And('the user should see text "Waiting for you to open the app" by 5 seconds', null, { page }); 
    await When('the DCMAW CRI produces a \'kennethD\' \'ukChippedPassport\' \'success\' VC', null, { dcmawAsyncService }); 
    await Then('the continue button should be enabled within 15 seconds', null, { page }); 
    await When('the user clicks on the Continue button', null, { page }); 
    await Then('the user should see a page with heading "We\'ve successfully matched you to the photo on your ID"', null, { page }); 
    await When('the user clicks on the Continue button', null, { page }); 
    await Then('the user should see a page with heading \'Address (Stub)\'', null, { page }); 
    await When('submits \'Kenneth Decerqueira (Valid Experian) Address\' evidence', null, { page }); 
    await Then('the user should see a page with heading \'Fraud Check (Stub)\'', null, { page }); 
    await When('submits \'Kenneth Decerqueira (Valid Experian) Fraud\' evidence with scores', {"dataTable":{"rows":[{"cells":[{"value":"Attribute"},{"value":"Values"}]},{"cells":[{"value":"fraud"},{"value":"1"}]},{"cells":[{"value":"activity"},{"value":"0"}]}]}}, { page }); 
    await Then('user should have a \'"P2"\' identity', null, { page }); 
  });

});

// == technical section ==

test.use({
  $test: [({}, use) => use(test), { scope: 'test', box: true }],
  $uri: [({}, use) => use('e2e-tests/features/strategicApp.feature'), { scope: 'test', box: true }],
  $bddFileData: [({}, use) => use(bddFileData), { scope: "test", box: true }],
});

const bddFileData = [ // bdd-data-start
  {"pwTestLine":6,"pickleLine":5,"tags":["@QualityGateStackTest","@Build","@QualityGateRegressionTest"],"steps":[{"pwStepLine":7,"gherkinStepLine":6,"keywordType":"Context","textWithKeyword":"Given user starts a fresh full journey in 'build'","stepMatchArguments":[{"group":{"start":36,"value":"'build'","children":[{"children":[{"children":[]}]},{"start":37,"value":"build","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":8,"gherkinStepLine":7,"keywordType":"Context","textWithKeyword":"And the 'strategicApp' feature set is enabled","stepMatchArguments":[{"group":{"start":4,"value":"'strategicApp'","children":[{"children":[{"children":[]}]},{"start":5,"value":"strategicApp","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":9,"gherkinStepLine":8,"keywordType":"Context","textWithKeyword":"And the user should see a page with heading 'Where do you live?'","stepMatchArguments":[{"group":{"start":40,"value":"'Where do you live?'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Where do you live?","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":10,"gherkinStepLine":9,"keywordType":"Action","textWithKeyword":"When clicks 'UK, Channel Islands or Isle of Man' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'UK, Channel Islands or Isle of Man'","children":[{"children":[{"children":[]}]},{"start":8,"value":"UK, Channel Islands or Isle of Man","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":11,"gherkinStepLine":10,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Tell us if you have one of the following types of photo ID'","stepMatchArguments":[{"group":{"start":40,"value":"'Tell us if you have one of the following types of photo ID'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Tell us if you have one of the following types of photo ID","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":12,"gherkinStepLine":11,"keywordType":"Action","textWithKeyword":"When clicks 'Yes' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'Yes'","children":[{"children":[{"children":[]}]},{"start":8,"value":"Yes","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":13,"gherkinStepLine":12,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Are you on a computer or a tablet right now?'","stepMatchArguments":[{"group":{"start":40,"value":"'Are you on a computer or a tablet right now?'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Are you on a computer or a tablet right now?","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":14,"gherkinStepLine":13,"keywordType":"Action","textWithKeyword":"When clicks 'No - I am on a smartphone' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'No - I am on a smartphone'","children":[{"children":[{"children":[]}]},{"start":8,"value":"No - I am on a smartphone","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":15,"gherkinStepLine":14,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Tell us what smartphone you are using now'","stepMatchArguments":[{"group":{"start":40,"value":"'Tell us what smartphone you are using now'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Tell us what smartphone you are using now","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":16,"gherkinStepLine":15,"keywordType":"Action","textWithKeyword":"When clicks \"Yes - I'm on an iPhone\" radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"\"Yes - I'm on an iPhone\"","children":[{"start":8,"value":"Yes - I'm on an iPhone","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":17,"gherkinStepLine":16,"keywordType":"Action","textWithKeyword":"And the DCMAW CRI produces a 'kennethD' 'ukChippedPassport' 'success' VC","stepMatchArguments":[{"group":{"start":25,"value":"'kennethD'","children":[{"children":[{"children":[]}]},{"start":26,"value":"kennethD","children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":36,"value":"'ukChippedPassport'","children":[{"children":[{"children":[]}]},{"start":37,"value":"ukChippedPassport","children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":56,"value":"'success'","children":[{"children":[{"children":[]}]},{"start":57,"value":"success","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":18,"gherkinStepLine":17,"keywordType":"Action","textWithKeyword":"And user returns from the app to core-front","stepMatchArguments":[]},{"pwStepLine":19,"gherkinStepLine":18,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading \"We're checking your details\"","stepMatchArguments":[{"group":{"start":40,"value":"\"We're checking your details\"","children":[{"start":41,"value":"We're checking your details","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":20,"gherkinStepLine":19,"keywordType":"Outcome","textWithKeyword":"Then the continue button should be enabled within 15 seconds","stepMatchArguments":[{"group":{"start":45,"value":"15","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":21,"gherkinStepLine":20,"keywordType":"Action","textWithKeyword":"When the user clicks on the Continue button","stepMatchArguments":[]},{"pwStepLine":22,"gherkinStepLine":21,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading \"We've successfully matched you to the photo on your ID\"","stepMatchArguments":[{"group":{"start":40,"value":"\"We've successfully matched you to the photo on your ID\"","children":[{"start":41,"value":"We've successfully matched you to the photo on your ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":23,"gherkinStepLine":22,"keywordType":"Action","textWithKeyword":"When the user clicks on the Continue button","stepMatchArguments":[]},{"pwStepLine":24,"gherkinStepLine":23,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Address (Stub)'","stepMatchArguments":[{"group":{"start":40,"value":"'Address (Stub)'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Address (Stub)","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":25,"gherkinStepLine":24,"keywordType":"Action","textWithKeyword":"When submits 'Kenneth Decerqueira (Valid Experian) Address' evidence","stepMatchArguments":[{"group":{"start":8,"value":"'Kenneth Decerqueira (Valid Experian) Address'","children":[{"children":[{"children":[]}]},{"start":9,"value":"Kenneth Decerqueira (Valid Experian) Address","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":26,"gherkinStepLine":25,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Fraud Check (Stub)'","stepMatchArguments":[{"group":{"start":40,"value":"'Fraud Check (Stub)'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Fraud Check (Stub)","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":27,"gherkinStepLine":26,"keywordType":"Action","textWithKeyword":"When submits 'Kenneth Decerqueira (Valid Experian) Fraud' evidence with scores","stepMatchArguments":[{"group":{"start":8,"value":"'Kenneth Decerqueira (Valid Experian) Fraud'","children":[{"children":[{"children":[]}]},{"start":9,"value":"Kenneth Decerqueira (Valid Experian) Fraud","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":28,"gherkinStepLine":30,"keywordType":"Outcome","textWithKeyword":"Then user should have a '\"P2\"' identity","stepMatchArguments":[{"group":{"start":19,"value":"'\"P2\"'","children":[{"children":[{"children":[]}]},{"start":20,"value":"\"P2\"","children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
  {"pwTestLine":31,"pickleLine":33,"tags":["@QualityGateStackTest","@Build","@PYIC-7471","@QualityGateRegressionTest"],"steps":[{"pwStepLine":32,"gherkinStepLine":34,"keywordType":"Context","textWithKeyword":"Given user starts a fresh full journey in 'build'","stepMatchArguments":[{"group":{"start":36,"value":"'build'","children":[{"children":[{"children":[]}]},{"start":37,"value":"build","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":33,"gherkinStepLine":35,"keywordType":"Context","textWithKeyword":"And the 'strategicApp' feature set is enabled","stepMatchArguments":[{"group":{"start":4,"value":"'strategicApp'","children":[{"children":[{"children":[]}]},{"start":5,"value":"strategicApp","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":34,"gherkinStepLine":36,"keywordType":"Context","textWithKeyword":"And the user should see a page with heading 'Where do you live?'","stepMatchArguments":[{"group":{"start":40,"value":"'Where do you live?'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Where do you live?","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":35,"gherkinStepLine":37,"keywordType":"Action","textWithKeyword":"When clicks 'UK, Channel Islands or Isle of Man' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'UK, Channel Islands or Isle of Man'","children":[{"children":[{"children":[]}]},{"start":8,"value":"UK, Channel Islands or Isle of Man","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":36,"gherkinStepLine":38,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Tell us if you have one of the following types of photo ID'","stepMatchArguments":[{"group":{"start":40,"value":"'Tell us if you have one of the following types of photo ID'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Tell us if you have one of the following types of photo ID","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":37,"gherkinStepLine":39,"keywordType":"Action","textWithKeyword":"When clicks 'Yes' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'Yes'","children":[{"children":[{"children":[]}]},{"start":8,"value":"Yes","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":38,"gherkinStepLine":40,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Are you on a computer or a tablet right now?'","stepMatchArguments":[{"group":{"start":40,"value":"'Are you on a computer or a tablet right now?'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Are you on a computer or a tablet right now?","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":39,"gherkinStepLine":41,"keywordType":"Action","textWithKeyword":"When clicks 'Yes - I am on a computer or tablet' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'Yes - I am on a computer or tablet'","children":[{"children":[{"children":[]}]},{"start":8,"value":"Yes - I am on a computer or tablet","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":40,"gherkinStepLine":42,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Tell us if you have access to an iPhone or Android phone'","stepMatchArguments":[{"group":{"start":40,"value":"'Tell us if you have access to an iPhone or Android phone'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Tell us if you have access to an iPhone or Android phone","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":41,"gherkinStepLine":43,"keywordType":"Action","textWithKeyword":"When clicks 'Yes - I have access to an iPhone' radio, then continue","stepMatchArguments":[{"group":{"start":7,"value":"'Yes - I have access to an iPhone'","children":[{"children":[{"children":[]}]},{"start":8,"value":"Yes - I have access to an iPhone","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":42,"gherkinStepLine":44,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading \"Use the GOV.UK One Login app to prove your identity\"","stepMatchArguments":[{"group":{"start":40,"value":"\"Use the GOV.UK One Login app to prove your identity\"","children":[{"start":41,"value":"Use the GOV.UK One Login app to prove your identity","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":43,"gherkinStepLine":45,"keywordType":"Outcome","textWithKeyword":"And the user should see text \"Waiting for you to open the app\" by 5 seconds","stepMatchArguments":[{"group":{"start":25,"value":"\"Waiting for you to open the app\"","children":[{"start":26,"value":"Waiting for you to open the app","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":62,"value":"5","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":44,"gherkinStepLine":46,"keywordType":"Action","textWithKeyword":"When the DCMAW CRI produces a 'kennethD' 'ukChippedPassport' 'success' VC","stepMatchArguments":[{"group":{"start":25,"value":"'kennethD'","children":[{"children":[{"children":[]}]},{"start":26,"value":"kennethD","children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":36,"value":"'ukChippedPassport'","children":[{"children":[{"children":[]}]},{"start":37,"value":"ukChippedPassport","children":[{"children":[]}]}]},"parameterTypeName":"string"},{"group":{"start":56,"value":"'success'","children":[{"children":[{"children":[]}]},{"start":57,"value":"success","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":45,"gherkinStepLine":47,"keywordType":"Outcome","textWithKeyword":"Then the continue button should be enabled within 15 seconds","stepMatchArguments":[{"group":{"start":45,"value":"15","children":[]},"parameterTypeName":"int"}]},{"pwStepLine":46,"gherkinStepLine":48,"keywordType":"Action","textWithKeyword":"When the user clicks on the Continue button","stepMatchArguments":[]},{"pwStepLine":47,"gherkinStepLine":49,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading \"We've successfully matched you to the photo on your ID\"","stepMatchArguments":[{"group":{"start":40,"value":"\"We've successfully matched you to the photo on your ID\"","children":[{"start":41,"value":"We've successfully matched you to the photo on your ID","children":[{"children":[]}]},{"children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":48,"gherkinStepLine":50,"keywordType":"Action","textWithKeyword":"When the user clicks on the Continue button","stepMatchArguments":[]},{"pwStepLine":49,"gherkinStepLine":51,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Address (Stub)'","stepMatchArguments":[{"group":{"start":40,"value":"'Address (Stub)'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Address (Stub)","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":50,"gherkinStepLine":52,"keywordType":"Action","textWithKeyword":"When submits 'Kenneth Decerqueira (Valid Experian) Address' evidence","stepMatchArguments":[{"group":{"start":8,"value":"'Kenneth Decerqueira (Valid Experian) Address'","children":[{"children":[{"children":[]}]},{"start":9,"value":"Kenneth Decerqueira (Valid Experian) Address","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":51,"gherkinStepLine":53,"keywordType":"Outcome","textWithKeyword":"Then the user should see a page with heading 'Fraud Check (Stub)'","stepMatchArguments":[{"group":{"start":40,"value":"'Fraud Check (Stub)'","children":[{"children":[{"children":[]}]},{"start":41,"value":"Fraud Check (Stub)","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":52,"gherkinStepLine":54,"keywordType":"Action","textWithKeyword":"When submits 'Kenneth Decerqueira (Valid Experian) Fraud' evidence with scores","stepMatchArguments":[{"group":{"start":8,"value":"'Kenneth Decerqueira (Valid Experian) Fraud'","children":[{"children":[{"children":[]}]},{"start":9,"value":"Kenneth Decerqueira (Valid Experian) Fraud","children":[{"children":[]}]}]},"parameterTypeName":"string"}]},{"pwStepLine":53,"gherkinStepLine":58,"keywordType":"Outcome","textWithKeyword":"Then user should have a '\"P2\"' identity","stepMatchArguments":[{"group":{"start":19,"value":"'\"P2\"'","children":[{"children":[{"children":[]}]},{"start":20,"value":"\"P2\"","children":[{"children":[]}]}]},"parameterTypeName":"string"}]}]},
]; // bdd-data-end