{% extends "govuk/template.njk" %}
{% from "govuk/components/cookie-banner/macro.njk" import govukCookieBanner %}
{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}

{%- block head %}
    <link href="/public/stylesheets/application.css" rel="stylesheet" media="all">
    {%- block headMetaData %}{%- endblock %}
{%- endblock %}

{% block pageTitle-%}
    {%- if error or errors %}
      {{ 'general.govuk.errorTitlePrefix' | translate }}
      – GOV.UK
    {%- endif %}
    {%- if pageTitleName %}{{ pageTitleName }} – GOV.UK{% endif %}
{%- endblock %}

{% block bodyStart %}
    {% include 'shared/banner.njk' %}
{% endblock %}

{% block header %}
    {{ govukHeader({
        homepageUrl: 'general.header.homepageHref' | translate
    }) }}
{% endblock %}

{% block main %}
    <div class="govuk-width-container {{ containerClasses }}">
        {{ govukPhaseBanner({
            tag: {
                text: 'general.govuk.phaseBanner.tag' | translate
            },
            html: 'general.govuk.phaseBanner.content' | translate
        }) }}
        {% block beforeContent %}{% endblock %}
        {% if showBack %}
            {{ govukBackLink({
                text: "general.backLink" | translate,
                href: hrefBack
            }) }}
        {% endif %}
        <main class="govuk-main-wrapper {{ mainClasses }}" id="main-content" role="main"{% if mainLang %} lang="{{ mainLang }}"{% endif %}>
            <div class="govuk-grid-row">
                <div class="govuk-grid-column-two-thirds {{ rowClasses }}">
                    {% block content %}{% endblock %}
                </div>
            </div>
        </main>
    </div>
{% endblock %}

{% block footer %}
    {{ govukFooter({
        meta: {
            items: [
                {
                    href:  "https://signin.account.gov.uk/accessibility-statement",
                    text: 'general.footer.accessibilityStatement.linkText' | translate
                },
                {
                    href: "https://signin.account.gov.uk/cookies",
                    text: 'general.footer.cookies.linkText' | translate
                },
                {
                    href: "https://signin.account.gov.uk/terms-and-conditions",
                    text: 'general.footer.terms.linkText' | translate
                },
                {
                    href:  "https://signin.account.gov.uk/privacy-notice",
                    text: 'general.footer.privacy.linkText' | translate
                },
                {
                    href: "https://signin.account.gov.uk/contact-us",
                    attributes: {target: "_blank", rel:"noreferrer noopener"},
                    text: 'general.footer.support.linkText' | translate
                }
            ]
        },
        contentLicence: {
            text: 'general.footer.contentLicence.linkText' | translate | safe
        },
        copyright: {
            text: 'general.footer.copyright.linkText' | translate
        }
    }) }}
{% endblock %}

{% block bodyEnd %}
    {% block scripts %}{% endblock %}
    <script type="text/javascript"  src="/public/javascripts/application.js"></script>
    <script type="text/javascript" nonce='{{ scriptNonce }}'>window.GOVSignIn.appInit("{{ gtmId }}", "{{ analyticsCookieDomain }}", "{{ googleTagManagerPageId }}")</script>
{% endblock %}
