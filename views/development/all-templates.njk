{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}

{% extends "shared/base.njk" %}
{% set pageTitleKey = "All templates" %}

{% if errorState %}
    {% set errorText = 'Select a page and a context if appropriate.' %}
{% endif %}

{% block content %}
  <form id="pageSelectForm" action="/dev/all-templates" method="POST">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}">

    {% set pageRadioOptionsConfig = [] %}
    {% for page in templateRadioOptions %}
      {% set conditional = {
        html: govukRadios({idPrefix: "pageContext",
        name: "pageContext",
        classes: "govuk-radios--small",
        fieldset: {
            legend: {
            text: 'Choose a context:',
            classes: "govuk-fieldset__legend--s"
            }
        },
        items: templateContextRadioOptions[page]})} if templateContextRadioOptions[page] else undefined %}
      {% set pageRadioOptionsConfig = (pageRadioOptionsConfig.push({
        text: page,
        value: page,
        conditional: conditional
        }), pageRadioOptionsConfig) %}
    {% endfor %}

    {{ govukRadios({
      name: "template",
      fieldset: {
        legend: {
          text: "Select a Page",
          classes: "govuk-fieldset__legend--m"
        }
      },
      items: pageRadioOptionsConfig
    }) }}

    {{ govukRadios({
      name: "language",
      fieldset: {
        legend: {
          text: "Select a Language",
          classes: "govuk-fieldset__legend--m"
        }
      },
      items: [
        {
          value: "en",
          text: "English",
          checked: true
        },
        {
          value: "cy",
          text: "Welsh"
        }
      ]
    }) }}

    {{ govukCheckboxes({
      name: "hasErrorState",
      items: [
        {
          text: "Error state",
          value: "true"
        }
      ]
    }) }}

    {{ govukButton({
      text: "Go"
    }) }}
  </form>
{% endblock %}
